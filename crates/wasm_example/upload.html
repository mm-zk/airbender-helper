<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WASM File Upload</title>
</head>

<body>
    <h1>Upload a File</h1>
    <input type="file" id="fileInput">
    <button id="processBtn">Process</button>

    <p id="output"></p>

    <script type="module">
        import init, { verify_all_program_proof } from "./pkg/wasm_example.js";

        async function main() {
            await init();

            document.getElementById("processBtn").addEventListener("click", async () => {
                const input = document.getElementById("fileInput");
                const file = input.files[0];
                if (!file) return alert("Please choose a file first!");

                const text = await file.text();

                const result = verify_all_program_proof(text);
                const msg = `Entries: ${result}`;
                document.getElementById("output").textContent = msg;
            });
        }

        main();
    </script>
</body>

</html>